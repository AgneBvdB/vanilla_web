// translations.js
const translations = {
  en: {
    nav: {
      "gallery-link": "View gallery",
      "contact-link": "Contact me",
      "about-link": "About the work"
    },
    index: {
      "hero-h1": "Let light, colors, and lightness",
      "hero-p": "into your everyday",
      "hero-cta": "See gallery",
      "year-filter": "Year",
      "year": "Year",
      "theme-filter": "Topic",
      "theme": "Topic",
      "flora": "Flora",
      "water": "Water",
      "forrest": "Forest",
      "dunes": "Dunes",
      "buildings": "Buildings",
      "other": "Other",
      "available-filter": "Available for purchase",
      "yes": "Yes",
      "no": "No"
    },
    form: {
      "buyer-name": "Name",
      "name-placeholder": { placeholder: "Enter your name" },
      "buyer-email": "Email",
      "email-placeholder": { placeholder: "Enter your email" },
      "consent": "I agree to be contacted about this painting.",
      "privacy": "*Our website does not collect any personal information from visitors. When you visit our website, we do not carry out any data tracking or aggregation activities.",
      "button-price": "Ask for price",
      "message": "Message",
      "send-btn": "Send",      
      "painting-id": "Painting ID:",
      "contact-h2": "Message me",
      "buy-h2": "For your collection",
      "message-placeholder": {placeholder: "Your message"}

    },
    about: {
      "about-h1": "From nature — ideas, from love — paintings",
      "about-alt-1": "There are many stones by the sea",
      "about-1": "I draw inspiration from nature — it moves me, ignites me. That’s why I most often paint landscapes and the sea. Landscapes, usually intimate in scale, are an inseparable part of my creative life: a space for meditation, growth, and a kind of art therapy for the soul.",
      "about-quote-1": "The sea is my love. Ever-changing, alive, and full of character",
      "about-2": "The sea is my love. Ever-changing, alive, and full of character. Even a simple walk along the shore brings me energy and a sense of renewal. Seascapes occupy a large part of my work, though capturing their volatility and shifting moods through painting is always a challenge.",
      "about-alt-2": "Shore at Karkle",
      "about-3": "My favorite medium is soft pastel. It allows me to infuse my works with warmth, coziness, delicate lighting, and subtle nuances of color. The search for self and constant improvement are essential to me, which is why I enjoy experimenting and discovering new possibilities with pastels. I believe that everything can be achieved through love for what you do and persistent dedication.",
      "about-quote-2": "The search for self and constant improvement are essential to me",
      "about-quote-3": "I have found my own path, and I follow it.",
      "about-4": "In my view, contemporary art is becoming more and more abstract, and individuality in painting seems to fade. I don’t wander among passing trends or styles — I have found my own path, and I follow it.",
      "about-5": "I strive to speak through images that are sincere and widely understood. But they are not <em> just </em> landscapes. They are emotion, impression, life itself."
    },
    infopage: {
      "want-btn": "Buy Artwork"
    }
  },

  lt: {
    nav: {
      "gallery-link": "Galerija",
      "contact-link": "Parašykite man",
      "about-link": "Apie kūrybą"
    },
    index: {
      "hero-h1": "Įsileisk šviesą,<br> spalvas ir lengvumą",
      "hero-p": "į savo kasdienybę",
      "hero-cta": "Žiūrėti galeriją",
      "year-filter": "Metai",
      "year": "Metai",
      "theme-filter": "Tema",
      "theme": "Tema",
      "flora": "Augalija",
      "water": "Vanduo",
      "forrest": "Miškas",
      "dunes": "Kopos",
      "buildings": "Pastatai",
      "other": "Kita",
      "available-filter": "Galima įsigyti",
      "yes": "Taip",
      "no": "Ne"
    },
    form: {
      "buyer-name": "Vardas",
      "name-placeholder": { placeholder: "Įveskite savo vardą" },
      "buyer-email": "Elektroninis paštas",
      "email-placeholder": { placeholder: "Įveskite savo el. pašt" },
      "consent": "Sutinku, kad su manimi būtų susisiekta dėl šio paveikslo.",
      "privacy": "*Mūsų svetainė nerenka jokios asmeninės informacijos iš lankytojų. Jums lankantis mūsų puslapyje, nevykdome jokios duomenų sekimo ar kaupimo veiklos.",
      "button-price": "Klausti kainos",
      "message": "Žinutė",
      "send-btn": "Siųsti",      
      "painting-id": "Paveikslo ID:",
      "contact-h2": "Parašykite man",
      "buy-h2": "Jūsų kolekcijai"

    },
    about: {
      "about-h1": "Iš gamtos — idėjos, iš meilės — paveikslai",
      "about-alt-1": "DAUG YRA AKMENŲ PRIE JŪROS",
      "about-1": "Iš gamtos semiuosi idėjų – ji mane įkvepia ir uždega. Todėl dažniausiai tapau peizažus, jūrą. Peizažas, dažniausiai kamerinis, yra neatsiejama mano kūrybinio gyvenimo dalis, medžiaga meditacijai ir lavinimuisi. Tai savotiška laisvalaikio dailės terapija.",
      "about-quote-1": "Jūra – mano meilė. Ji tokia įvairi, besikeičianti, gyva.",
      "about-2": "Jūra - mano meilė. Ji tokia įvairi, besikeičianti, gyva. Jau vien pasivaikščiojimas pajūriu suteikia energijos ir apsivalymo jausmą. Jūrinis peizažas užima didelę dalį mano kūrybos. Perteikti tapybos priemonėmis jos nepastovumą, permainingumą labai nelengva užduotis.",
      "about-alt-2": "PAKRANTĖ TIES KARKLE",
      "about-3": "Mano mylima technika – sausa pastelė. Ji man teikia galimybę perduoti darbams jaukumą, šilumą, subtilų apšvietimą, įvairius spalvų niuansus. Savęs ieškojimas ir tobulinimas yra būtinas dalykas, todėl mėgstu eksperimentuoti, atrasti vis naujas pastelės galimybes. Manau, kad viskas yra pasiekiama per meilę tam, ką darai, ir atkaklų darbą.",
      "about-quote-2": "Savęs ieškojimas ir tobulinimas – kūrybos dalis.",
      "about-quote-3": "Pajaučiau savo kelią ir juo einu.",
      "about-4": "Mano manymu, šiuolaikinis menas tampa vis abstraktesnis. Tapyboje tarsi pranyksta individualumas. Aš neklaidžioju tarp stilių ir madų įvairovės. Pajaučiau savo kelią ir juo einu.",
      "about-5": "Man patinka kalbėti nuoširdžiais ir daugeliui suprantamais vaizdais. Bet tai nėra <em>tik</em> peizažas. Tai emocija, impresija, gyvenimas."
    },
    infopage: {
      "want-btn": "Įsigykite"
    },
  }
}
// --- Helper: safely get nested keys (e.g. "nav.gallery-link") ---
function getTranslation(lang, key) {
  const parts = key.split(".");
  let obj = translations[lang];

  for (const part of parts) {
    if (obj && typeof obj === "object" && part in obj) {
      obj = obj[part];
    } else {
      // fallback to English if missing
      obj = translations.en;
      for (const p of parts) {
        obj = obj?.[p];
      }
      return obj;
    }
  }
  return obj;
}

// --- Apply translations to the page ---
function setLanguage(lang) {
  document.querySelectorAll("[data-i18n]").forEach(el => {
    const key = el.getAttribute("data-i18n");
    const translation = getTranslation(lang, key);

    if (typeof translation === "string") {
      el.innerHTML = translation; // use innerHTML for <em>, <br>, etc.
    } else if (typeof translation === "object") {
      for (const attr in translation) {
        el.setAttribute(attr, translation[attr]);
      }
    }
  });

  localStorage.setItem("lang", lang);
}


(function () {
  const container = document.getElementById('lang-switcher');
  if (!container) return;

  const buttons = Array.from(container.querySelectorAll('.lang-btn'));
  const STORAGE_KEY = 'lang';

  // Utility to set active state visually and for accessibility
  function setActiveButton(lang) {
    buttons.forEach(btn => {
      const isActive = btn.dataset.lang === lang;
      btn.classList.toggle('active', isActive);
      btn.setAttribute('aria-pressed', isActive ? 'true' : 'false');
    });
  }

  // If your site already defines setLanguage(lang), call it.
  // Otherwise provide a minimal fallback that stores lang and reloads the page.
  function doSetLanguage(lang) {
    if (typeof setLanguage === 'function') {
      setLanguage(lang);
    } else {
      // fallback: save preference and reload so server-side or other scripts can handle
      localStorage.setItem(STORAGE_KEY, lang);
      // optional: reload to let the page re-render, remove if you don't want a reload
      // location.reload();
    }
  }

  // Click / keyboard handlers
  buttons.forEach(btn => {
    btn.addEventListener('click', () => {
      const lang = btn.dataset.lang;
      doSetLanguage(lang);
      setActiveButton(lang);
      // store preference
      localStorage.setItem(STORAGE_KEY, lang);
    });

    // allow Enter/Space activation for accessibility (button already handles it,
    // but this ensures consistent behavior if element changes)
    btn.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        btn.click();
      }
    });
  });

  // Initialize from saved preference or default
  const saved = localStorage.getItem(STORAGE_KEY) || (navigator.language?.startsWith('lt') ? 'lt' : 'en');
  setActiveButton(saved);
  // If setLanguage is available, apply it on load
  if (typeof setLanguage === 'function') setLanguage(saved);
})();